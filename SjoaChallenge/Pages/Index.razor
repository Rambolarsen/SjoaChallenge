@page "/"
@using Microsoft.Extensions.Logging
@inject NavigationManager NavigationManager
@inject UserService UserService
@inject ILogger<Index> Logger
@inject IConfiguration Configuration
@inject IJSRuntime JS

<PageTitle>Index</PageTitle>

<div>
    <Flicker />
    <div class="input-wrapper">
        <input type="text" @bind="Text" @oninput="HandleSubmit" />
    </div>
</div>

@code {
    private string Text { get; set; } = string.Empty;

    private async Task HandleSubmit(ChangeEventArgs e)
    {
        if (e.Value?.ToString()?.Length > 6)
        {
            Text = string.Empty;
            StateHasChanged();
            return;
        } 
        if (string.Compare("bouvet", e.Value?.ToString(), true) == 0)
        {
            Logger.LogInformation("HandleSubmit called with value {0}", e.Value);

            await UserService.LogIn();
            NavigationManager.NavigateTo("terminal");
        }
    }
}